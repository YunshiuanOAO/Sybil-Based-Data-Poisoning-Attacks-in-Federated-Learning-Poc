# ğŸ¯ Sybil æ”»æ“Šå·¥å…·ä½¿ç”¨èªªæ˜

## ğŸ“ é …ç›®çµæ§‹

```
sybil-attack/
â”œâ”€â”€ environment.py      # è¯é‚¦å­¸ç¿’ç’°å¢ƒæ¨¡çµ„
â”œâ”€â”€ attack.py          # æ”»æ“Šç­–ç•¥æ¨¡çµ„  
â”œâ”€â”€ setup.py           # ç’°å¢ƒè¨­ç½®æ¨¡çµ„
â”œâ”€â”€ main.py            # ä¸»åŸ·è¡Œè…³æœ¬
â”œâ”€â”€ config.py          # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt   # ä¾è³´é …åˆ—è¡¨
â””â”€â”€ ä½¿ç”¨èªªæ˜.md        # æœ¬æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æ­¥é©Ÿ 1: ç’°å¢ƒè¨­ç½®

```bash
# 1. æª¢æŸ¥ç’°å¢ƒï¼ˆæ¨è–¦å…ˆåŸ·è¡Œï¼‰
python setup.py

# 2. å¦‚æœæœ‰ç¼ºå¤±ä¾è³´ï¼Œå®‰è£å®ƒå€‘
pip install torch torchvision numpy

# æˆ–è€…ä½¿ç”¨ requirements.txt
pip install -r requirements.txt
```

### æ­¥é©Ÿ 2: é‹è¡Œæ”»æ“Šæ¨¡æ“¬

```bash
# ä½¿ç”¨é»˜èªè¨­ç½®é‹è¡Œ
python main.py

# é¸æ“‡ç‰¹å®šæ”»æ“Šå ´æ™¯
python main.py --scenario aggressive

# è‡ªå®šç¾©åƒæ•¸
python main.py --honest-clients 8 --sybil-clients 4 --rounds 15
```

## ğŸ“‹ è©³ç´°ä½¿ç”¨æ–¹æ³•

### ğŸ”§ ç’°å¢ƒè¨­ç½®

`setup.py` æ¨¡çµ„è² è²¬ç’°å¢ƒåˆå§‹åŒ–ï¼š

```bash
# å®Œæ•´ç’°å¢ƒæª¢æŸ¥
python setup.py

# åƒ…æª¢æŸ¥ç’°å¢ƒï¼ˆä¸åŸ·è¡Œæ”»æ“Šï¼‰
python main.py --setup-only
```

è¨­ç½®éç¨‹åŒ…æ‹¬ï¼š
- âœ… æª¢æŸ¥ç³»çµ±ä¾è³´é …
- âœ… å‰µå»ºæ•¸æ“šç›®éŒ„  
- âœ… æ¸¬è©¦ PyTorch åŠŸèƒ½
- âœ… é©—è­‰æ¨¡çµ„å°å…¥

### ğŸ¯ æ”»æ“Šè…³æœ¬

`main.py` æ˜¯ä¸»åŸ·è¡Œå…¥å£ï¼Œæ”¯æŒå¤šç¨®å‘½ä»¤è¡Œåƒæ•¸ï¼š

#### åŸºæœ¬ç”¨æ³•

```bash
# é»˜èªä¸­ç­‰æ”»æ“Šå ´æ™¯
python main.py

# é¡¯ç¤ºå¹«åŠ©ä¿¡æ¯
python main.py --help
```

#### æ”»æ“Šå ´æ™¯é¸æ“‡

```bash
# æº«å’Œæ”»æ“Šï¼ˆè¼ƒæ™šé–‹å§‹ï¼Œå½±éŸ¿è¼ƒå°ï¼‰
python main.py --scenario mild

# ä¸­ç­‰æ”»æ“Šï¼ˆä¸­æœŸé–‹å§‹ï¼Œå¹³è¡¡å½±éŸ¿ï¼‰[é»˜èª]
python main.py --scenario moderate  

# æ¿€é€²æ”»æ“Šï¼ˆæ—©æœŸé–‹å§‹ï¼ŒæŒçºŒæ™‚é–“é•·ï¼‰
python main.py --scenario aggressive

# éš±è”½æ”»æ“Šï¼ˆå¾ˆæ™šæ‰é–‹å§‹ï¼Œé›£ä»¥è¢«ç™¼ç¾ï¼‰
python main.py --scenario stealth
```

#### è‡ªå®šç¾©åƒæ•¸

```bash
# è¨­ç½®å®¢æˆ¶ç«¯æ•¸é‡
python main.py --honest-clients 10 --sybil-clients 5

# è¨­ç½®è¨“ç·´è¼ªæ•¸å’Œæ”»æ“Šé–‹å§‹è¼ªæ•¸
python main.py --rounds 20 --start-round 5

# è¨­ç½®æŠ•æ¯’æ¯”ä¾‹
python main.py --poison-ratio 0.5

# æŒ‡å®šè¼¸å‡ºæ–‡ä»¶
python main.py --output my_attack_results.json

# éœé»˜æ¨¡å¼ï¼ˆæ¸›å°‘è¼¸å‡ºï¼‰
python main.py --quiet
```

#### å®Œæ•´åƒæ•¸åˆ—è¡¨

| åƒæ•¸ | èªªæ˜ | é»˜èªå€¼ |
|------|------|--------|
| `--scenario` | æ”»æ“Šå ´æ™¯ (mild/moderate/aggressive/stealth) | moderate |
| `--rounds` | è¨“ç·´è¼ªæ•¸ | å ´æ™¯æ±ºå®š |
| `--start-round` | æ”»æ“Šé–‹å§‹è¼ªæ•¸ | å ´æ™¯æ±ºå®š |
| `--honest-clients` | èª å¯¦å®¢æˆ¶ç«¯æ•¸é‡ | 5 |
| `--sybil-clients` | Sybil å®¢æˆ¶ç«¯æ•¸é‡ | 3 |
| `--poison-ratio` | æŠ•æ¯’æ¯”ä¾‹ (0.0-1.0) | 0.3 |
| `--output` | çµæœè¼¸å‡ºæ–‡ä»¶å | è‡ªå‹•ç”Ÿæˆ |
| `--quiet` | éœé»˜æ¨¡å¼ | False |
| `--setup-only` | åƒ…é€²è¡Œç’°å¢ƒæª¢æŸ¥ | False |

## ğŸ—ï¸ æ¨¡çµ„èªªæ˜

### ğŸ“¦ environment.py

åŒ…å«è¯é‚¦å­¸ç¿’ç’°å¢ƒçš„æ ¸å¿ƒçµ„ä»¶ï¼š

- `FederatedLearningEnvironment`: è¯é‚¦å­¸ç¿’ç’°å¢ƒé¡
- `HonestClient`: èª å¯¦å®¢æˆ¶ç«¯é¡
- `SybilClient`: Sybil æƒ¡æ„å®¢æˆ¶ç«¯é¡
- `SimpleNN`: ç¥ç¶“ç¶²çµ¡æ¨¡å‹
- `PoisonedDataset`: æŠ•æ¯’æ•¸æ“šé›†é¡

```python
from environment import FederatedLearningEnvironment

# å‰µå»ºç’°å¢ƒ
env = FederatedLearningEnvironment(
    num_honest_clients=5,
    num_sybil_clients=3,
    poison_ratio=0.3
)
```

### âš”ï¸ attack.py

åŒ…å«æ”»æ“Šç­–ç•¥å’Œç·¨æ’åŠŸèƒ½ï¼š

- `SybilAttackOrchestrator`: æ”»æ“Šç·¨æ’å™¨
- `ATTACK_SCENARIOS`: é å®šç¾©æ”»æ“Šå ´æ™¯
- è¯é‚¦å¹³å‡ç®—æ³•
- æ”»æ“Šæ•ˆæœåˆ†æ

```python
from attack import SybilAttackOrchestrator

# å‰µå»ºæ”»æ“Šç·¨æ’å™¨
orchestrator = SybilAttackOrchestrator(env)

# é‹è¡Œæ”»æ“Šæ¨¡æ“¬
results = orchestrator.run_attack_simulation(
    total_rounds=12,
    attack_start_round=3
)
```

### âš™ï¸ setup.py

ç’°å¢ƒè¨­ç½®å’Œé©—è­‰ï¼š

- `EnvironmentSetup`: ç’°å¢ƒè¨­ç½®é¡
- `quick_setup()`: å¿«é€Ÿè¨­ç½®å‡½æ•¸
- `validate_environment()`: ç’°å¢ƒé©—è­‰å‡½æ•¸

```python
from setup import quick_setup

# åŸ·è¡Œç’°å¢ƒè¨­ç½®
success, config = quick_setup()
```

## ğŸ“Š çµæœè¼¸å‡º

æ”»æ“Šå®Œæˆå¾Œæœƒç”Ÿæˆï¼š

1. **æ§åˆ¶å°è¼¸å‡º**: å¯¦æ™‚é€²åº¦å’Œçµæœåˆ†æ
2. **JSON çµæœæ–‡ä»¶**: è©³ç´°çš„æ”»æ“Šæ•¸æ“šå’Œçµ±è¨ˆ
3. **æ–‡å­—å¯è¦–åŒ–**: æ”»æ“Šé€²åº¦æ¢å½¢åœ–

### çµæœæ–‡ä»¶æ ¼å¼

```json
{
  "environment_info": {
    "num_honest_clients": 5,
    "num_sybil_clients": 3,
    "sybil_ratio": 0.375
  },
  "attack_effectiveness": {
    "max_accuracy_drop": 0.0332,
    "avg_attack_impact": 0.0289,
    "effectiveness_level": "ä½æ•ˆ"
  },
  "training_history": [...]
}
```

## ğŸ” å¸¸è¦‹ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1: åŸºç¤æ”»æ“Šæ¸¬è©¦

```bash
# ä½¿ç”¨é»˜èªè¨­ç½®é€²è¡Œå¿«é€Ÿæ¸¬è©¦
python main.py
```

### å ´æ™¯ 2: ä¸åŒæ”»æ“Šå¼·åº¦æ¯”è¼ƒ

```bash
# æ¸¬è©¦ä¸åŒå ´æ™¯
python main.py --scenario mild --output mild_attack.json
python main.py --scenario aggressive --output aggressive_attack.json
```

### å ´æ™¯ 3: åƒæ•¸æ•æ„Ÿæ€§åˆ†æ

```bash
# æ¸¬è©¦ä¸åŒ Sybil æ¯”ä¾‹
python main.py --sybil-clients 2 --output low_sybil.json
python main.py --sybil-clients 6 --output high_sybil.json

# æ¸¬è©¦ä¸åŒæŠ•æ¯’æ¯”ä¾‹
python main.py --poison-ratio 0.1 --output low_poison.json
python main.py --poison-ratio 0.5 --output high_poison.json
```

### å ´æ™¯ 4: å¤§è¦æ¨¡å¯¦é©—

```bash
# æ›´å¤šå®¢æˆ¶ç«¯å’Œæ›´é•·è¨“ç·´
python main.py --honest-clients 20 --sybil-clients 10 --rounds 30
```

## âš ï¸ æ³¨æ„äº‹é …

### ç³»çµ±è¦æ±‚

- Python 3.7+
- PyTorch 1.8+
- è‡³å°‘ 2GB å¯ç”¨å…§å­˜
- å»ºè­°ä½¿ç”¨ GPUï¼ˆå¯é¸ï¼‰

### é‹è¡Œæ™‚é–“

- é»˜èªè¨­ç½®: ç´„ 2-5 åˆ†é˜
- å¤§è¦æ¨¡å¯¦é©—: å¯èƒ½éœ€è¦ 10-30 åˆ†é˜

### æ•…éšœæ’é™¤

1. **å°å…¥éŒ¯èª¤**: ç¢ºä¿æ‰€æœ‰æ¨¡çµ„åœ¨åŒä¸€ç›®éŒ„
2. **ä¾è³´ç¼ºå¤±**: é‹è¡Œ `python setup.py` æª¢æŸ¥
3. **å…§å­˜ä¸è¶³**: æ¸›å°‘å®¢æˆ¶ç«¯æ•¸é‡æˆ–æ‰¹å¤§å°
4. **CUDA éŒ¯èª¤**: å¯ä»¥åœ¨ CPU æ¨¡å¼ä¸‹é‹è¡Œ

## ğŸ”¬ ç ”ç©¶ä½¿ç”¨

### è‡ªå®šç¾©å¯¦é©—

å¯ä»¥ä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶é€²è¡Œè‡ªå®šç¾©ç ”ç©¶ï¼š

- `config.py`: èª¿æ•´é»˜èªåƒæ•¸
- `environment.py`: ä¿®æ”¹å®¢æˆ¶ç«¯è¡Œç‚ºæˆ–æ•¸æ“šåˆ†å¸ƒ
- `attack.py`: å¯¦ç¾æ–°çš„æ”»æ“Šç­–ç•¥
- `main.py`: æ·»åŠ æ–°çš„å¯¦é©—é¸é …

### æ‰¹é‡å¯¦é©—ç¤ºä¾‹

```bash
#!/bin/bash
# æ‰¹é‡å¯¦é©—è…³æœ¬

# æ¸¬è©¦ä¸åŒ Sybil æ¯”ä¾‹
for sybil in 2 4 6 8; do
    python main.py --sybil-clients $sybil --output "sybil_${sybil}.json" --quiet
done

# æ¸¬è©¦ä¸åŒæ”»æ“Šå ´æ™¯
for scenario in mild moderate aggressive stealth; do
    python main.py --scenario $scenario --output "${scenario}_attack.json" --quiet
done
```

## ğŸ“š é€²éšä½¿ç”¨

### ç¨‹å¼åŒ–ä½¿ç”¨

```python
# ç›´æ¥ä½¿ç”¨æ¨¡çµ„é€²è¡Œç¨‹å¼åŒ–æ§åˆ¶
from environment import FederatedLearningEnvironment
from attack import SybilAttackOrchestrator

# å‰µå»ºç’°å¢ƒ
env = FederatedLearningEnvironment(
    num_honest_clients=10,
    num_sybil_clients=5
)

# å‰µå»ºæ”»æ“Šå™¨
attacker = SybilAttackOrchestrator(env)

# é€æ­¥åŸ·è¡Œæ”»æ“Š
for round_num in range(15):
    result = attacker.execute_training_round()
    print(f"Round {round_num}: Accuracy = {result['accuracy']:.4f}")

# åˆ†æçµæœ
effectiveness = attacker.analyze_attack_effectiveness()
print(f"Attack effectiveness: {effectiveness['effectiveness_level']}")
```

## ğŸ“„ è¼¸å‡ºæ–‡ä»¶ç®¡ç†

çµæœæ–‡ä»¶æœƒè‡ªå‹•ä¿å­˜ç‚º JSON æ ¼å¼ï¼ŒåŒ…å«æ™‚é–“æˆ³ã€‚æ‚¨å¯ä»¥ï¼š

1. **æŒ‡å®šæ–‡ä»¶å**: `--output custom_name.json`
2. **çµ„ç¹”å¯¦é©—çµæœ**: å‰µå»ºå­ç›®éŒ„å­˜æ”¾ä¸åŒå¯¦é©—
3. **æ•¸æ“šåˆ†æ**: ä½¿ç”¨ Python æˆ–å…¶ä»–å·¥å…·åˆ†æ JSON çµæœ

é€™å€‹æ¨¡çµ„åŒ–çš„è¨­è¨ˆè®“æ‚¨å¯ä»¥ï¼š
- ğŸ”§ ç¨ç«‹é€²è¡Œç’°å¢ƒè¨­ç½®
- âš”ï¸ éˆæ´»é…ç½®æ”»æ“Šåƒæ•¸  
- ğŸ“Š æ–¹ä¾¿åˆ†æå¯¦é©—çµæœ
- ğŸ”¬ æ”¯æŒå¤§è¦æ¨¡ç ”ç©¶å¯¦é©— 